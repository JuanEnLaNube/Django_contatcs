{% load static %}

<!DOCTYPE html>
<html  lang="en">

<head>
    <meta charset=UTF-8>
    <title>Juan en la nube: Contactos</title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">


</head>

<body>
    <!-- Menajes -->
    {% if messages %}
        {% for message in messages %}
            {% if message.tags == 'success' %}
            <div class="alert alert-success alert-dismissible fade show">
                <strong>¡Felicidades!</strong> {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
            {% elif message.tags == 'error' %}
            <div class="alert alert-danger alert-dismissible fade show">
                <strong>Error:</strong> {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
            {% elif message.tags == 'info' %}
            <div class="alert alert-info alert-dismissible fade show">
                <strong>Información: </strong> {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
            {% endif %}
        {%endfor%}
    {% endif %}


    <h1 style="text-align: center; margin-top: 3rem; margin-bottom: 2rem;">Contactos</h1>

    <div class="container col-8" style="margin: auto; border-style: solid; margin-bottom: 2rem;">
        <form method="POST" enctype="multipart/form-data" >
            {% csrf_token %}
            <div class="card-body " >
    
                <h4 style="text-align: center; margin-bottom: 2rem;">Registrar un nuevo contacto</h4>
    
                <div id="id_identificacion" class="form-group row"  style="margin-bottom: .5rem;">
                    <label for="id_identificacion" class="col-4 col-form-label">
                        <span class="asteriskField" style="color: red;">*</span>Fotografía:</label>
                    <div class="col-lg-8"  style="margin-bottom: .5rem;">
                        <input type="file" name="foto" accept="image/*"
                            class="clearablefileinput form-control-file" id="id_identificacion" required>
                    </div>
                </div>
    
                <div class="row" style="margin-bottom: .5rem;">
                    <div class="col-lg-4">
                        <label for="id_name" id="id_name">
                            <span style="color: red;">*</span>Nombre(s):</label>
                    </div>
                    <div class="col-lg-8" style="margin-bottom: .5rem;">
                        <input class="form-control" type="text" name="nombre" maxlength="30"
                            placeholder="Nombre completo" required>
                    </div>
                </div>
    
                <div class="form-group row" style="margin-bottom: .5rem;">
                    <label for="id_telephone" class="col-4 form-group requiredField">
                        <span class="asteriskField" style="color: red;">*</span>Teléfono:
                    </label>
                    <div class="col-lg-8"  style="margin-bottom: .5rem;">
                            <input class="form-control" type="text" name="telefono" placeholder="10 dígitos" maxlength="10"
                                class="textinput textInput form-control form-control" required="" id="id_telephone">
                    </div>
                </div>
    
                <div class="form-group row"  style="margin-bottom: .5rem;">
                    <label for="id_email" class="col-4 col-form-label">
                        <span class="asteriskField" style="color: red;">*</span>Corre electrónico:</label>
                    <div class="col-lg-8"  style="margin-bottom: .5rem;">
                        <input  class="form-control" type="email" name="email" placeholder="correo@dominio.com" maxlength="60"
                            class="emailinput form-control" required="" id="id_email"> 
                    </div>
                </div>
    
    
            </div>
            <!-- /.card-body -->
    
            <div class="card-footer">
                <div class="container" style="position: relative; margin-left: 40%; margin-top: 1rem;" >
                    <button style="margin: auto;" name="submit" type="submit" class="btn btn-primary">Registrar</button>
                </div>
            </div>
            </div>
        </form>
    </div>

    {% if mis_contactos %}
    <div class="container">
        <h2>Contactos registrados</h2>
        <table id="contactos" class="table table-bordered table-striped">
            <thead>
                <th>Fotografía</th>
                <th>Nombre</th>
                <th>Teléfono</th>
                <th>Correo electrónico</th>
            </thead>
            <tbody>
                {% for entry in mis_contactos %}
                <tr>
                    <td><a href={{entry.foto}} target="_blank">Fotografía</a></td>
                    <td>{{entry.nombre}}</td>
                    <td>{{entry.telefono}}</td>
                    <td>{{entry.email}}</td>
                </tr>
                {%endfor%}
            </tbody>
        </table>
    </div>    
    {%endif%}
</body>

</html>